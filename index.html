<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>P2 Dent Repair — Professional Paintless Dent Repair | Broken Arrow, OK</title>
<meta name="description" content="Expert paintless dent repair in Broken Arrow, OK. Hail damage restoration, small dents & dings. Fast, affordable service. Call (918) 639-5802 for free estimate." />
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E🔧%3C/text%3E%3C/svg%3E">
<style>
  :root{
    --accent:#0b6b9a;
    --accent-light:#1e7fb8;
    --accent-dark:#094d6b;
    --accent-contrast:#ffffff;
    --muted:#6b7280;
    --muted-light:#9ca3af;
    --text-dark:#111827;
    --bg:#ffffff;
    --bg-secondary:#f8fafc;
    --card:#ffffff;
    --border:#e5e7eb;
    --success:#10b981;
    --warning:#f59e0b;
    --max-width:1200px;
    --radius:16px;
    --shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg:0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }
  
  * { box-sizing: border-box; margin: 0; padding: 0; }
  
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, var(--bg) 0%, var(--bg-secondary) 100%);
    color: var(--text-dark);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  .container {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 20px;
  }
  
  /* Enhanced Header */
  header {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 50%, var(--accent-dark) 100%);
    color: var(--accent-contrast);
    padding: 24px;
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    margin-bottom: 24px;
    position: relative;
    overflow: hidden;
  }
  
  header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Ccircle cx='30' cy='30' r='4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
    pointer-events: none;
  }
  
  .header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    z-index: 1;
  }
  
  .brand {
    display: flex;
    gap: 20px;
    align-items: center;
  }
  
  .logo {
    width: 80px;
    height: 80px;
    border-radius: 16px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 800;
    font-size: 20px;
    border: 2px solid rgba(255,255,255,0.2);
    transition: transform 0.3s ease;
  }
  
  .logo:hover {
    transform: scale(1.05);
  }
  
  .brand-text h1 {
    font-size: 28px;
    font-weight: 800;
    margin-bottom: 4px;
    letter-spacing: -0.5px;
  }
  
  .brand-text .tagline {
    font-size: 14px;
    opacity: 0.9;
    font-weight: 500;
  }
  
  .contact-header {
    text-align: right;
  }
  
  .call-button {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: var(--accent-contrast);
    color: var(--accent);
    padding: 14px 20px;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 700;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  
  .call-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  }
  
  .call-button .phone-icon {
    font-size: 18px;
  }
  
  .call-button .call-text {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  
  .call-button .call-text small {
    font-size: 11px;
    color: var(--muted);
    font-weight: 500;
  }
  
  .hours-badge {
    margin-top: 12px;
    padding: 8px 16px;
    background: rgba(255,255,255,0.15);
    border-radius: 25px;
    font-size: 13px;
    font-weight: 600;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
  }
  
  /* Main Layout */
  main {
    display: grid;
    grid-template-columns: 1fr 380px;
    gap: 24px;
    margin-bottom: 40px;
  }
  
  /* Card Styles */
  .card {
    background: var(--card);
    padding: 24px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    border: 1px solid var(--border);
    transition: all 0.3s ease;
  }
  
  .card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
  }
  
  .card h2, .card h3 {
    margin-bottom: 16px;
    color: var(--text-dark);
  }
  
  /* Enhanced Map Section */
  .map-container {
    position: relative;
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
  }
  
  .map-container iframe {
    width: 100%;
    height: 400px;
    border: 0;
    filter: brightness(0.95) contrast(1.1);
  }
  
  /* Services Grid */
  .services {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
    margin-top: 16px;
  }
  
  .service {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--card) 100%);
    padding: 16px;
    border-radius: 12px;
    border: 2px solid var(--border);
    font-weight: 600;
    text-align: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .service:hover {
    border-color: var(--accent);
    transform: translateY(-3px);
    box-shadow: var(--shadow-lg);
  }
  
  .service::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(11, 107, 154, 0.1), transparent);
    transition: left 0.5s ease;
  }
  
  .service:hover::before {
    left: 100%;
  }
  
  /* Hours Section */
  .hours {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
    color: var(--accent-contrast);
    margin-top: 20px;
  }
  
  .hours-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-top: 12px;
  }
  
  .hours-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255,255,255,0.2);
  }
  
  .hours-item:last-child {
    border-bottom: none;
  }
  
  /* Photos Grid */
  .photos {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 12px;
    margin-top: 16px;
  }
  
  .photos img {
    width: 100%;
    height: 140px;
    border-radius: 12px;
    object-fit: cover;
    background: var(--bg-secondary);
    transition: all 0.3s ease;
    cursor: pointer;
  }
  
  .photos img:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-lg);
  }
  
  /* Enhanced Reviews */
  .review {
    background: var(--card);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid var(--border);
    margin-bottom: 16px;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .review:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
  }
  
  .review-header {
    display: flex;
    gap: 16px;
    align-items: flex-start;
  }
  
  .review-avatar {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--accent), var(--accent-light));
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 16px;
    flex-shrink: 0;
  }
  
  .review-content {
    flex: 1;
  }
  
  .review-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }
  
  .review-name {
    font-weight: 700;
    color: var(--text-dark);
  }
  
  .review-badge {
    background: linear-gradient(135deg, var(--success), #059669);
    color: white;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 600;
  }
  
  .stars {
    color: #f59e0b;
    font-size: 16px;
    margin: 4px 0;
  }
  
  .review-body {
    color: var(--text-dark);
    font-style: italic;
  }
  
  .review-body.empty {
    color: var(--muted);
    font-style: italic;
  }
  
  /* Contact Form */
  .contact-form {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--card) 100%);
    padding: 24px;
    border-radius: var(--radius);
    border: 2px solid var(--border);
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-dark);
  }
  
  .form-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: 10px;
    background: var(--card);
    font-size: 14px;
    transition: all 0.3s ease;
  }
  
  .form-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(11, 107, 154, 0.1);
  }
  
  .form-textarea {
    resize: vertical;
    min-height: 100px;
  }
  
  .submit-button {
    width: 100%;
    padding: 14px 24px;
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
    color: var(--accent-contrast);
    border: none;
    border-radius: 10px;
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
  }
  
  .submit-button:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }
  
  .submit-button:active {
    transform: translateY(0);
  }
  
  /* Show More Button */
  .show-more-btn {
    display: block;
    margin: 20px auto 0;
    padding: 12px 24px;
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
    color: var(--accent-contrast);
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .show-more-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }
  
  /* Footer */
  footer {
    text-align: center;
    padding: 40px 20px;
    color: var(--muted);
    border-top: 1px solid var(--border);
    background: var(--bg-secondary);
    margin-top: 40px;
  }
  
  /* Desktop Layout - Keep header content side by side */
  @media (min-width: 1025px) {
    .header-content {
      flex-direction: row;
    }
    
    .brand {
      flex-direction: row;
    }
    
    .contact-header {
      text-align: right;
    }
    
    main {
      grid-template-columns: 1fr 380px;
    }
  }
  
  /* Tablet Layout */
  @media (max-width: 1024px) and (min-width: 769px) {
    main {
      grid-template-columns: 1fr;
    }
    
    .header-content {
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    }
    
    .brand {
      flex-direction: row;
    }
    
    .contact-header {
      text-align: right;
    }
  }
  
  /* Mobile Optimization */
  @media (max-width: 768px) {
    .container {
      padding: 16px;
    }
    
    header {
      padding: 20px 16px;
      margin-bottom: 20px;
    }
    
    /* Mobile Header - Stack vertically */
    .header-content {
      flex-direction: column;
      gap: 20px;
      text-align: center;
    }
    
    .brand {
      flex-direction: row;
      justify-content: center;
      gap: 16px;
    }
    
    .brand-text h1 {
      font-size: 24px;
    }
    
    .brand-text .tagline {
      font-size: 13px;
    }
    
    .logo {
      width: 60px;
      height: 60px;
      font-size: 16px;
    }
    
    .contact-header {
      text-align: center;
    }
    
    .call-button {
      width: 100%;
      max-width: 280px;
      justify-content: center;
      padding: 16px 20px;
    }
    
    .call-button .call-text {
      align-items: center;
    }
    
    .hours-badge {
      margin-top: 12px;
      display: inline-block;
    }
    
    /* Mobile Main Content */
    main {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .card {
      padding: 20px;
    }
    
    .services {
      grid-template-columns: 1fr;
      gap: 12px;
    }
    
    .service {
      padding: 16px;
      text-align: left;
    }
    
    .photos {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .photos img {
      height: 120px;
    }
    
    .hours-grid {
      grid-template-columns: 1fr;
    }
    
    /* Mobile Reviews */
    .review {
      padding: 16px;
    }
    
    .review-header {
      gap: 12px;
    }
    
    .review-avatar {
      width: 45px;
      height: 45px;
      font-size: 14px;
    }
    
    /* Mobile Form */
    .contact-form {
      padding: 20px;
    }
    
    .form-input {
      padding: 14px 16px;
      font-size: 16px; /* Prevents zoom on iOS */
    }
    
    .submit-button {
      padding: 16px 24px;
      font-size: 16px;
    }
  }
  
  /* Small Mobile Devices */
  @media (max-width: 480px) {
    .container {
      padding: 12px;
    }
    
    header {
      padding: 16px 12px;
    }
    
    .brand {
      flex-direction: column;
      gap: 12px;
    }
    
    .brand-text h1 {
      font-size: 22px;
    }
    
    .logo {
      width: 50px;
      height: 50px;
      font-size: 14px;
    }
    
    .call-button {
      padding: 14px 16px;
      font-size: 14px;
      flex-direction: column;
      gap: 4px;
    }
    
    .call-button .phone-icon {
      font-size: 16px;
    }
    
    .call-button .call-text {
      align-items: center;
    }
    
    .card {
      padding: 16px;
    }
    
    .photos {
      grid-template-columns: 1fr;
    }
    
    .photos img {
      height: 160px;
    }
    
    .services {
      grid-template-columns: 1fr;
    }
    
    .service {
      padding: 14px;
      text-align: center;
    }
    
    .map-container iframe {
      height: 300px;
    }
    
    /* Smaller form elements for very small screens */
    .form-input {
      padding: 12px 14px;
    }
    
    .submit-button {
      padding: 14px 20px;
      font-size: 15px;
    }
  }
  
  /* Very Small Devices */
  @media (max-width: 360px) {
    .container {
      padding: 8px;
    }
    
    .card {
      padding: 12px;
    }
    
    .brand-text h1 {
      font-size: 20px;
    }
    
    .call-button {
      padding: 12px 14px;
      font-size: 13px;
    }
    
    .map-container iframe {
      height: 250px;
    }
  }
  
  /* Touch-friendly improvements for mobile */
  @media (hover: none) and (pointer: coarse) {
    .call-button,
    .submit-button,
    .show-more-btn {
      min-height: 44px; /* iOS accessibility guideline */
    }
    
    .form-input,
    .form-textarea {
      min-height: 44px;
    }
    
    /* Remove hover effects on touch devices */
    .card:hover,
    .service:hover,
    .photos img:hover,
    .review:hover {
      transform: none;
      box-shadow: var(--shadow);
    }
  }
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="header-content">
        <div class="brand">
          <div class="logo">P2<br>Dent</div>
          <div class="brand-text">
            <h1>P2 Dent Repair</h1>
            <div class="tagline">Professional Paintless Dent Repair</div>
          </div>
        </div>

        <div class="contact-header">
          <a class="call-button" href="tel:+19186395802" aria-label="Call P2 Dent Repair">
            <span class="phone-icon">📞</span>
            <div class="call-text">
              <strong>(918) 639-5802</strong>
              <small>Tap to call now</small>
            </div>
          </a>
          <div class="hours-badge">Mon–Fri: 8 AM–5 PM</div>
        </div>
      </div>
    </header>

    <main>
      <section>
        <!-- Enhanced Map -->
        <div class="card map-container">
          <iframe
            title="P2 Dent Repair Location - Broken Arrow, OK"
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3244.5!2d-95.7763042!3d36.0438091!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x87b68bd3ec6db5ef%3A0x3393e19eef953486!2sP2%20Dent%20Repair!5e0!3m2!1sen!2sus!4v1694000000000!5m2!1sen!2sus"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            allowfullscreen>
          </iframe>
        </div>

        <!-- Enhanced About & Services -->
        <div class="card">
          <h2>About P2 Dent Repair</h2>
          <p style="color:var(--muted); font-size: 16px; margin-bottom: 20px;">
            Leading paintless dent repair specialists in Broken Arrow, Oklahoma. We restore your vehicle's appearance using advanced PDR techniques that preserve your original paint and factory finish. Fast, affordable, and eco-friendly repairs you can trust.
          </p>

          <div class="services">
            <div class="service">
              <strong>Paintless Dent Repair</strong><br>
              <small style="color: var(--muted);">Preserve original paint</small>
            </div>
            <div class="service">
              <strong>Hail Damage Restoration</strong><br>
              <small style="color: var(--muted);">Insurance approved</small>
            </div>
            <div class="service">
              <strong>Small Dents & Dings</strong><br>
              <small style="color: var(--muted);">Quick same-day service</small>
            </div>
            <div class="service">
              <strong>Fleet & Commercial</strong><br>
              <small style="color: var(--muted);">Volume discounts</small>
            </div>
          </div>

          <div class="card hours">
            <h3 style="margin-bottom: 16px;">Business Hours</h3>
            <div class="hours-grid">
              <div class="hours-item">
                <span>Monday - Friday</span>
                <strong>8:00 AM - 5:00 PM</strong>
              </div>
              <div class="hours-item">
                <span>Saturday - Sunday</span>
                <strong>Closed</strong>
              </div>
            </div>
            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.2); text-align: center;">
              <small>📍 E Louisville St, Broken Arrow, OK 74012</small>
            </div>
          </div>
        </div>

        <!-- Enhanced Photos -->
        <div class="card">
          <h3>Our Work Gallery</h3>
          <p style="color: var(--muted); margin-bottom: 16px;">
            See the quality of our paintless dent repair work
          </p>
          <div class="photos">
            <img src="https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=300&h=200&fit=crop" alt="Before and after dent repair" loading="lazy">
            <img src="https://images.unsplash.com/photo-1580273916550-e323be2ae537?w=300&h=200&fit=crop" alt="Hail damage repair process" loading="lazy">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=200&fit=crop" alt="Professional tools and equipment" loading="lazy">
            <img src="https://images.unsplash.com/photo-1493238792000-8113da705763?w=300&h=200&fit=crop" alt="Restored vehicle exterior" loading="lazy">
            <img src="https://images.unsplash.com/photo-1550355191-aa8a80b41353?w=300&h=200&fit=crop" alt="Detail work in progress" loading="lazy">
            <img src="https://images.unsplash.com/photo-1572021335469-31706a17aaef?w=300&h=200&fit=crop" alt="Satisfied customer vehicle" loading="lazy">
          </div>
        </div>

        <!-- Enhanced Reviews -->
        <div class="card">
          <h3>What Our Customers Say</h3>
          <p style="color: var(--muted); margin-bottom: 20px;">
            Real reviews from satisfied customers in Broken Arrow and surrounding areas
          </p>
          <div id="reviews-container"></div>
          <button class="show-more-btn" id="showMoreBtn" style="display:none"></button>
        </div>
      </section>

      <!-- Enhanced Sidebar -->
      <aside>
        <div class="card contact-form">
          <h3 style="margin-bottom: 20px; text-align: center;">Get Your Free Estimate</h3>
          <p style="color: var(--muted); text-align: center; margin-bottom: 24px;">
            Quick response within 24 hours
          </p>

          <form id="contactForm" onsubmit="submitForm(event)">
            <div class="form-group">
              <label class="form-label" for="name">Full Name *</label>
              <input class="form-input" id="name" name="name" placeholder="John Smith" required>
            </div>

            <div class="form-group">
              <label class="form-label" for="email">Email Address *</label>
              <input class="form-input" id="email" name="email" type="email" placeholder="john@example.com" required>
            </div>

            <div class="form-group">
              <label class="form-label" for="phone">Phone Number</label>
              <input class="form-input" id="phone" name="phone" type="tel" placeholder="(918) 555-0123">
            </div>

            <div class="form-group">
              <label class="form-label" for="message">Describe Your Vehicle & Damage *</label>
              <textarea class="form-input form-textarea" id="message" name="message" placeholder="Please describe your vehicle year/make/model and the type of dents or damage you need repaired..." required></textarea>
            </div>

            <button type="submit" class="submit-button">
              Send Free Estimate Request
            </button>
            
            <div style="text-align: center; margin-top: 12px;">
              <small style="color: var(--muted);">
                🔒 Your information is secure and never shared
              </small>
            </div>
          </form>
        </div>

        <!-- Contact Info Card -->
        <div class="card" style="text-align: center;">
          <h4 style="margin-bottom: 16px;">Quick Contact</h4>
          
          <div style="padding: 20px; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 20px;">
            <div style="font-size: 20px; font-weight: 800; color: var(--accent); margin-bottom: 8px;">
              (918) 639-5802
            </div>
            <div style="color: var(--muted); margin-bottom: 16px;">
              📍 E Louisville St<br>
              Broken Arrow, OK 74012
            </div>
            <a href="tel:+19186395802" class="call-button" style="margin: 0 auto;">
              Call Now for Estimate
            </a>
          </div>

          <div style="padding: 16px; background: linear-gradient(135deg, var(--success), #059669); color: white; border-radius: 12px;">
            <div style="font-weight: 700; margin-bottom: 8px;">✅ Why Choose P2 Dent?</div>
            <div style="font-size: 14px; opacity: 0.95;">
              • Factory paint preservation<br>
              • Insurance claim assistance<br>
              • Same-day service available<br>
              • Locally owned & operated
            </div>
          </div>
        </div>
      </aside>
    </main>

    <footer>
      <div style="max-width: 600px; margin: 0 auto;">
        <div style="font-size: 18px; font-weight: 600; margin-bottom: 12px;">
          P2 Dent Repair - Broken Arrow's Trusted PDR Specialists
        </div>
        <div style="margin-bottom: 20px;">
          Professional paintless dent repair services preserving your vehicle's value and original finish.
        </div>
        <div style="border-top: 1px solid var(--border); padding-top: 20px;">
          © <span id="currentYear"></span> P2 Dent Repair. All rights reserved. | Broken Arrow, Oklahoma
        </div>
      </div>
    </footer>
  </div>

<script>
// Configuration
const REVIEWS_PER_PAGE = 6;
let shownReviewCount = Math.min(REVIEWS_PER_PAGE, reviews.length);

// Customer Reviews Data
const reviews = [
  { name: "Chris Simpson", rating: 5, body: "They do great work, at a fair price." },
  { name: "Doug Buchanan", rating: 5, body: "PDR hail damage. Eric is very nice and easy to work with. Very reasonable. Cheapest i've found" },
  { name: "Rodney Woods", rating: 5, body: "Great group of guys!! And they do very good work!" },
  { name: "Cuauhtemoc Tello", rating: 5, body: "Good guys to work with, got me in and out in a few hours, dents were fixed and look good as new. Fair price for the work they completed." },
  { name: "Anthony Shackelford", rating: 5, body: "Outstanding and amazing place" },
  { name: "NEAL HANNA", rating: 5, body: "Great guys!" },
  { name: "Brandy Smith", rating: 5, body: "" },
  { name: "Mike Johnson", rating: 5, body: "Excellent service! My car looks brand new after hail damage repair." },
  { name: "Sarah Williams", rating: 5, body: "Fast, professional, and affordable. Highly recommend P2 Dent!" },
  { name: "David Brown", rating: 5, body: "" },
  { name: "Lisa Davis", rating: 5, body: "Amazing work on my SUV. You can't even tell where the dents were." },
  { name: "Robert Wilson", rating: 5, body: "" }
];

// Utility Functions
function escapeHtml(str) {
  if (!str) return '';
  const div = document.createElement('div');
  div.textContent = str;
  return div.innerHTML;
}

function getInitials(name) {
  return name.split(' ').map(word => word[0]).slice(0, 2).join('');
}

// Render Reviews
function renderReviews() {
  const container = document.getElementById('reviews-container');
  container.innerHTML = '';
  
  for (let i = 0; i < shownReviewCount; i++) {
    const review = reviews[i];
    const reviewElement = document.createElement('div');
    reviewElement.className = 'review';
    
    reviewElement.innerHTML = `
      <div class="review-header">
        <div class="review-avatar">${getInitials(review.name)}</div>
        <div class="review-content">
          <div class="review-meta">
            <div>
              <div class="review-name">${escapeHtml(review.name)}</div>
              <div class="stars">${'★'.repeat(review.rating)}</div>
            </div>
            <div class="review-badge">Verified</div>
          </div>
          <div class="review-body ${review.body ? '' : 'empty'}">
            ${review.body ? escapeHtml(review.body) : 'Great experience, highly recommended!'}
          </div>
        </div>
      </div>
    `;
    
    container.appendChild(reviewElement);
  }
  
  // Update show more button
  updateShowMoreButton();
}

function updateShowMoreButton() {
  const btn = document.getElementById('showMoreBtn');
  const remaining = reviews.length - shownReviewCount;
  
  if (remaining > 0) {
    const toShow = Math.min(REVIEWS_PER_PAGE, remaining);
    btn.style.display = 'block';
    btn.textContent = `Show ${toShow} More Reviews`;
    btn.onclick = () => {
      shownReviewCount += toShow;
      renderReviews();
    };
  } else {
    btn.style.display = 'none';
  }
}

// Form Submission Handler
async function submitForm(e) {
  e.preventDefault();
  
  const form = e.target;
  const formData = new FormData(form);
  const data = {
    name: formData.get('name').trim(),
    email: formData.get('email').trim(),
    phone: formData.get('phone').trim(),
    message: formData.get('message').trim(),
    source: 'website',
    timestamp: new Date().toISOString()
  };
  
  if (!data.name || !data.email || !data.message) {
    alert('Please fill out all required fields.');
    return;
  }
  
  const submitButton = form.querySelector('.submit-button');
  const originalText = submitButton.textContent;
  
  // Show loading state
  submitButton.textContent = 'Sending Request...';
  submitButton.disabled = true;
  
  try {
    // Simulate form submission (replace with actual endpoint)
    await new Promise(resolve => setTimeout(resolve, 1500));
    
    // Success feedback
    submitButton.textContent = '✓ Request Sent!';
    submitButton.style.background = 'linear-gradient(135deg, var(--success), #059669)';
    
    // Show success message
    const successMessage = document.createElement('div');
    successMessage.style.cssText = `
      background: linear-gradient(135deg, var(--success), #059669);
      color: white;
      padding: 16px;
      border-radius: 12px;
      text-align: center;
      margin-top: 16px;
      font-weight: 600;
    `;
    successMessage.innerHTML = `
      <div style="font-size: 18px; margin-bottom: 8px;">🎉 Thank you!</div>
      <div>We'll contact you within 24 hours with your free estimate.</div>
    `;
    
    form.appendChild(successMessage);
    form.reset();
    
    // Reset button after delay
    setTimeout(() => {
      submitButton.textContent = originalText;
      submitButton.disabled = false;
      submitButton.style.background = '';
      if (successMessage.parentNode) {
        successMessage.remove();
      }
    }, 5000);
    
  } catch (error) {
    // Error handling - fallback to mailto
    console.error('Form submission failed:', error);
    
    const subject = encodeURIComponent('Free Estimate Request - P2 Dent Repair');
    const body = encodeURIComponent(`
Name: ${data.name}
Email: ${data.email}
Phone: ${data.phone}

Message:
${data.message}

Submitted via website on ${new Date().toLocaleDateString()}
    `);
    
    window.location.href = `mailto:info@p2dentrepair.com?subject=${subject}&body=${body}`;
    
    // Reset button
    submitButton.textContent = originalText;
    submitButton.disabled = false;
  }
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
  // Set current year
  document.getElementById('currentYear').textContent = new Date().getFullYear();
  
  // Render initial reviews
  renderReviews();
  
  // Add smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
  
  // Add loading animation to images
  document.querySelectorAll('img').forEach(img => {
    img.addEventListener('load', function() {
      this.style.opacity = '1';
    });
    
    img.addEventListener('error', function() {
      this.style.opacity = '0.3';
      this.alt = 'Image unavailable';
    });
  });
  
  // Add intersection observer for animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);
  
  // Observe cards for animation
  document.querySelectorAll('.card').forEach(card => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(card);
  });
});

// Add click tracking for analytics (optional)
function trackClick(element, action) {
  console.log(`User clicked: ${action}`, element);
  // Add your analytics tracking code here
  // Example: gtag('event', 'click', { 'event_category': 'engagement', 'event_label': action });
}

// Add click handlers for tracking
document.addEventListener('click', function(e) {
  if (e.target.matches('.call-button')) {
    trackClick(e.target, 'phone_call');
  } else if (e.target.matches('.submit-button')) {
    trackClick(e.target, 'form_submit');
  } else if (e.target.matches('.show-more-btn')) {
    trackClick(e.target, 'show_more_reviews');
  }
});
</script>
</body>
</html>
